<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #div1{
            /*margin: 100px auto;*/
            width: 100px;
            height: 100px;
            background: olive;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div id="div1"></div>
</body>
</html>
<script src="../utils%20(1).js"></script>
<script>
    var div1=document.getElementById('div1');

    animate({ele:div1,target:{left:400},//duration:2000,
        callback:function(){
        animate({
            ele : this,
            target : {
                top : 500
            }
        });
    }});
    /*function animate(option){
        var time=0;
        var begin={};
        var change={};
        var ele=option.ele;//?
        var target=option.target;
        var duration=option.duration ||1000;
        var callback=option.callback;


        for(var key in target){
            begin[key]=utils.getCss(ele,key);
            change[key]=target[key]-begin[key];
        }

        //负责动画
        ele.timer && window.clearInterval(ele.timer);
        ele.timer=window.setInterval(function(){
            time +=10;
            if(time>=duration){
                window.clearInterval(ele.timer);
                for(var key in target){
                    utils.setCss(ele,key,target[key]);
                }

                if(typeof callback=='function'){
                    callback.call(ele);
                }
                return;
            }
            for(var key in change){
                var val=begin[key]+time/duration*change[key];
                utils.setCss(ele,key,val);
            }
        },10);
    }
*/
    /*function animate(option){
        var time=0;
        var begin={};
        var change={};
        var ele=option.ele;
        var target=option.target;
        var duration=option.duration ||1000;
        var callback=option.callback;
        for(var key in target){
            begin[key]=utils.getCss(ele,key);
            change[key]=target[key]-begin[key];
        }
        //负责动画
        ele.timer=window.clearInterval(ele.timer);
        ele.timer=window.setInterval(function(){
            time+=10;
            if(time>=duration){
                window.clearInterval(ele.timer);
                for(var key in target){
                    utils.setCss(ele,key,target[key]);
                }
                if(typeof callback=='function'){
                    callback.call(ele);
                }
                return;
            }
            for(var key in change){
                var val=begin[key]+time/duration*change[key];
                utils.setCss(ele,key,val);
            }
        },10);
    }*/
    function animate(option){
        var time=0;
        var begin={};
        var change={};
        var ele=option.ele;
        var target=option.target;
        var duration=option.duration||1000;
        var callback=option.callback;
        for(var key in target){
            begin[key]=utils.getCss(ele,key);
            change[key]=target[key]-begin[key];
        }
        //动画
        ele.timer && window.clearInterval(ele.timer);
        ele.timer=window.setInterval(function(){
            time+=10;
            if(time>=duration){
                window.clearInterval(ele.timer);
                for(var key in target){
                    utils.setCss(ele,target[key]);
                }
                if(typeof  callback=='function'){
                    callback.call(ele);
                }
                return;
            }
            for(var key in change){
                var val=begin[key]+time/duration*change[key];
                utils.setCss(ele,key,val)
            }

        },10);
    }



key

</script>